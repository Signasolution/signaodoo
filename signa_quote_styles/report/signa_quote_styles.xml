<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Header snippets -->
    <template id="signa_header_signasolution">
        <div class="signa-header">
            <div style="padding:12px 16px; font-size:18px; font-weight:700; background:#1f4e79; color:#fff;">
                LOGO SignaSolution
            </div>
        </div>
    </template>

    <template id="signa_header_signaparc">
        <div class="signa-header">
            <div style="padding:12px 16px; font-size:18px; font-weight:700; background:#2e7d32; color:#fff;">
                LOGO SignaParc
            </div>
        </div>
    </template>

    <template id="signa_header_signagolf">
        <div class="signa-header">
            <div style="padding:12px 16px; font-size:18px; font-weight:700; background:#006064; color:#fff;">
                LOGO SignaGolf
            </div>
        </div>
    </template>

    <template id="signa_header_signaindustrie">
        <div class="signa-header">
            <div style="padding:12px 16px; font-size:18px; font-weight:700; background:#424242; color:#fff;">
                LOGO SignaIndustrie
            </div>
        </div>
    </template>

    <!-- Robust layout router.
         It does NOT assume 'o' exists. It relies on docs/docids that the report engine provides. -->
    <template id="external_layout_router">
        <!-- Make sure we have docs even if some module altered the report values -->
        <t t-set="docs2" t-value="docs or env['sale.order'].browse(docids)"/>
        <t t-set="doc" t-value="(docs2 and docs2[0]) or False"/>

        <t t-set="company" t-value="(doc and doc.company_id) or env.company"/>
        <t t-set="signa_style" t-value="(doc and doc._signa_get_quote_style()) or False"/>

        <t t-call="web.basic_layout">
            <div class="header">
                <t t-if="signa_style == 'SignaSolution'" t-call="signa_quote_styles.signa_header_signasolution"/>
                <t t-elif="signa_style == 'SignaParc'" t-call="signa_quote_styles.signa_header_signaparc"/>
                <t t-elif="signa_style == 'SignaGolf'" t-call="signa_quote_styles.signa_header_signagolf"/>
                <t t-elif="signa_style == 'SignaIndustrie'" t-call="signa_quote_styles.signa_header_signaindustrie"/>
                <t t-else="">
                    <div style="padding:12px 16px; font-size:18px; font-weight:700;">
                        <span t-esc="company.name"/>
                    </div>
                </t>
            </div>

            <div class="article">
                <t t-out="0"/>
            </div>

            <div class="footer" style="padding-top:10px; border-top:1px solid #ddd; font-size:12px;">
                <div><span t-esc="company.name"/></div>
            </div>
        </t>
    </template>

    <!-- Replace any external layout call in the sale order report by our router -->
    <template id="report_saleorder_document_layout_router" inherit_id="sale.report_saleorder_document">
        <xpath expr="//t[starts-with(@t-call,'web.external_layout')]" position="replace">
            <t t-call="signa_quote_styles.external_layout_router">
                <t t-out="0"/>
            </t>
        </xpath>
    </template>

</odoo>
