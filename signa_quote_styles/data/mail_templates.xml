<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
    4 modèles d'email distincts, chacun attachant son rapport.
    L'action 'Envoyer par email' est forcée automatiquement via action_quotation_send().
    -->

    <record id="email_template_sale_quotation_signasolution" model="mail.template">
        <field name="name">Devis (SignaSolution)</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="subject">${object.company_id.name} - Devis ${object.name}</field>
        <field name="email_from">${(object.user_id.email_formatted or object.company_id.email_formatted or '')}</field>
        <field name="email_to">${object.partner_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Bonjour ${object.partner_id.name or ''},</p>
            <p>Veuillez trouver ci-joint notre devis <strong>${object.name}</strong>.</p>
            <p>Cordialement,</p>
            <p>${object.user_id.name or object.company_id.name}</p>
        ]]></field>
        <field name="report_template_ids" eval="[(4, ref(\'signa_quote_styles.action_report_saleorder_signasolution\'))]"/>
        <field name="report_name">${(object.name or 'Devis')}</field>
        <field name="lang">${object.partner_id.lang}</field>
        <field name="auto_delete" eval="False"/>
    </record>

    <record id="email_template_sale_quotation_signaparc" model="mail.template">
        <field name="name">Devis (SignaParc)</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="subject">${object.company_id.name} - Devis ${object.name}</field>
        <field name="email_from">${(object.user_id.email_formatted or object.company_id.email_formatted or '')}</field>
        <field name="email_to">${object.partner_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Bonjour ${object.partner_id.name or ''},</p>
            <p>Veuillez trouver ci-joint notre devis <strong>${object.name}</strong>.</p>
            <p>Cordialement,</p>
            <p>${object.user_id.name or object.company_id.name}</p>
        ]]></field>
        <field name="report_template_ids" eval="[(4, ref(\'signa_quote_styles.action_report_saleorder_signaparc\'))]"/>
        <field name="report_name">${(object.name or 'Devis')}</field>
        <field name="lang">${object.partner_id.lang}</field>
        <field name="auto_delete" eval="False"/>
    </record>

    <record id="email_template_sale_quotation_signagolf" model="mail.template">
        <field name="name">Devis (SignaGolf)</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="subject">${object.company_id.name} - Devis ${object.name}</field>
        <field name="email_from">${(object.user_id.email_formatted or object.company_id.email_formatted or '')}</field>
        <field name="email_to">${object.partner_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Bonjour ${object.partner_id.name or ''},</p>
            <p>Veuillez trouver ci-joint notre devis <strong>${object.name}</strong>.</p>
            <p>Cordialement,</p>
            <p>${object.user_id.name or object.company_id.name}</p>
        ]]></field>
        <field name="report_template_ids" eval="[(4, ref(\'signa_quote_styles.action_report_saleorder_signagolf\'))]"/>
        <field name="report_name">${(object.name or 'Devis')}</field>
        <field name="lang">${object.partner_id.lang}</field>
        <field name="auto_delete" eval="False"/>
    </record>

    <record id="email_template_sale_quotation_signaindustrie" model="mail.template">
        <field name="name">Devis (SignaIndustrie)</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="subject">${object.company_id.name} - Devis ${object.name}</field>
        <field name="email_from">${(object.user_id.email_formatted or object.company_id.email_formatted or '')}</field>
        <field name="email_to">${object.partner_id.email or ''}</field>
        <field name="body_html"><![CDATA[
            <p>Bonjour ${object.partner_id.name or ''},</p>
            <p>Veuillez trouver ci-joint notre devis <strong>${object.name}</strong>.</p>
            <p>Cordialement,</p>
            <p>${object.user_id.name or object.company_id.name}</p>
        ]]></field>
        <field name="report_template_ids" eval="[(4, ref(\'signa_quote_styles.action_report_saleorder_signaindustrie\'))]"/>
        <field name="report_name">${(object.name or 'Devis')}</field>
        <field name="lang">${object.partner_id.lang}</field>
        <field name="auto_delete" eval="False"/>
    </record>

</odoo>
