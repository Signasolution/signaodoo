<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <template id="report_product_sheet">
      <t t-call="web.external_layout">
        <t t-set="company" t-value="res_company"/>
        <div class="page">
          <h2 style="margin:0 0 10px 0;">
            <t t-esc="doc.display_name"/>
          </h2>
          <div class="row" style="display:flex; gap:16px;">
            <div style="flex:0 0 200px; max-width:200px;">
              <t t-if="doc.image_1920">
                <img t-att-src="'data:image/png;base64,%s' % (doc.image_1920)"
                     style="max-width:200px; max-height:200px;"/>
              </t>
            </div>
            <div style="flex:1;">
              <p t-if="doc.default_code and doc.default_code.strip()"><strong>Référence :</strong> <t t-esc="doc.default_code"/></p>
              <p t-if="doc.barcode and doc.barcode.strip()"><strong>Code-barres :</strong> <t t-esc="doc.barcode"/></p>
              <p t-if="doc.categ_id"><strong>Catégorie :</strong> <t t-esc="doc.categ_id.display_name"/></p>
              <p t-if="doc.list_price is not False and doc.list_price > 0"><strong>Prix public :</strong> <t t-esc="formatLang(doc.list_price, monetary=True, dp=2)"/> <t t-esc="doc.currency_id and doc.currency_id.symbol or ''"/></p>
              <p t-if="doc.type"><strong>Type :</strong> <t t-esc="doc.type"/></p>
              <t t-if="doc.sale_ok or doc.purchase_ok">
                <p>
                  <strong>Utilisation :</strong>
                  <t t-if="doc.sale_ok">Vente</t><t t-if="doc.sale_ok and doc.purchase_ok"> / </t><t t-if="doc.purchase_ok">Achat</t>
                </p>
              </t>
            </div>
          </div>

          <t t-if="doc.description_sale">
            <h3 style="margin-top:16px;">Description commerciale</h3>
            <div t-raw="doc.description_sale"/>
          </t>

          <h3 style="margin-top:16px;">Caractéristiques</h3>
          <table class="table table-sm" style="width:100%; border-collapse:collapse;" border="1" cellspacing="0" cellpadding="6">
            <tbody>
              <tr t-if="doc.weight and doc.weight > 0">
                <td style="width:35%;"><strong>Poids (kg)</strong></td>
                <td><t t-esc="formatLang(doc.weight, dp=3)"/></td>
              </tr>
              <tr t-if="doc.volume and doc.volume > 0">
                <td><strong>Volume (m³)</strong></td>
                <td><t t-esc="formatLang(doc.volume, dp=3)"/></td>
              </tr>
              <tr t-if="hasattr(doc, 'x_studio_hauteur_1') and doc.x_studio_hauteur_1">
                <td><strong>Hauteur (H)</strong></td>
                <td><t t-esc="doc.x_studio_hauteur_1"/></td>
              </tr>
              <tr t-if="hasattr(doc, 'x_studio_longueur') and doc.x_studio_longueur">
                <td><strong>Longueur (L)</strong></td>
                <td><t t-esc="doc.x_studio_longueur"/></td>
              </tr>
              <tr t-if="hasattr(doc, 'x_studio_largeur') and doc.x_studio_largeur">
                <td><strong>Largeur (l)</strong></td>
                <td><t t-esc="doc.x_studio_largeur"/></td>
              </tr>
              <tr t-if="hasattr(doc, 'x_studio_essence_bois') and doc.x_studio_essence_bois">
                <td><strong>Essence de bois</strong></td>
                <td><t t-esc="doc.x_studio_essence_bois"/></td>
              </tr>
              <tr t-if="hasattr(doc, 'x_studio_hcl') and doc.x_studio_hcl">
                <td><strong>HCL</strong></td>
                <td><t t-esc="doc.x_studio_hcl"/></td>
              </tr>
              <tr t-if="hasattr(doc, 'x_studio_srf') and doc.x_studio_srf">
                <td><strong>SRF</strong></td>
                <td><t t-esc="doc.x_studio_srf"/></td>
              </tr>
            </tbody>
          </table>

          <t t-if="doc.attribute_line_ids">
            <h3 style="margin-top:16px;">Variantes</h3>
            <ul>
              <t t-foreach="doc.attribute_line_ids" t-as="line">
                <li>
                  <strong><t t-esc="line.attribute_id.name"/> :</strong>
                  <t t-foreach="line.value_ids" t-as="val">
                    <t t-esc="val.name"/><t t-if="not loop_last">, </t>
                  </t>
                </li>
              </t>
            </ul>
          </t>

          <t t-if="doc.accessory_product_ids">
            <h3 style="margin-top:16px;">Accessoires recommandés</h3>
            <ul>
              <t t-foreach="doc.accessory_product_ids" t-as="acc">
                <li><t t-esc="acc.display_name"/></li>
              </t>
            </ul>
          </t>

          <t t-if="doc.description">
            <h3 style="margin-top:16px;">Notes internes</h3>
            <div t-raw="doc.description"/>
          </t>
        </div>
      </t>
    </template>

    <template id="report_product_sheet_document_wrapper">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="doc">
          <t t-call="product_product_sheet.report_product_sheet">
            <t t-set="doc" t-value="doc"/>
          </t>
        </t>
      </t>
    </template>
  </data>
</odoo>