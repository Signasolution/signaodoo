<!DOCTYPE html>
<html>
<head>
    <title>Test JavaScript Price Break</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>Test du module Tableau de Prix Dégressifs</h1>
    
    <div class="oe_website_sale">
        <div class="product_info">
            <h2>Produit Test</h2>
            <div class="product_price">
                <span>Prix: 100€</span>
            </div>
            <input type="hidden" name="product_template_id" value="1">
        </div>
    </div>
    
    <script>
        // Simuler l'environnement Odoo
        console.log('Test du script JavaScript');
        
        // Inclure le script de test
        const script = document.createElement('script');
        script.src = '/price_break_table/static/src/js/price_break_ultra_simple.js';
        script.onload = function() {
            console.log('Script chargé, test de l\'initialisation...');
            setTimeout(() => {
                if (window.PriceBreak) {
                    console.log('Fonction PriceBreak disponible');
                    window.PriceBreak.init();
                } else {
                    console.log('Fonction PriceBreak non disponible');
                }
            }, 1000);
        };
        script.onerror = function() {
            console.error('Erreur lors du chargement du script');
        };
        document.head.appendChild(script);
    </script>
    
    <script>
        // Test direct de la fonction
        setTimeout(() => {
            console.log('Test direct de la fonction getProductId');
            
            // Simuler la recherche d'ID produit
            const productInput = document.querySelector('input[name="product_template_id"]');
            if (productInput) {
                console.log('Input trouvé:', productInput.value);
            } else {
                console.log('Input non trouvé');
            }
        }, 2000);
    </script>
</body>
</html>
