
<odoo>
    <record id="view_product_form_pricelist_table" model="ir.ui.view">
        <field name="name">product.template.pricelist.qty.table</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='sales']" position="inside">
                <group string="Tarifs dégressifs (liste active)">
                    <field name="product_variant_ids" invisible="1"/>
                    <field name="product_pricelist_item_ids" invisible="1" attrs="{'invisible': [('product_variant_ids', '=', False)]}"/>
                    <div>
                        <label for="product_variant_ids" string=""/>
                        <div class="oe_structure"/>
                        <field name="product_variant_ids" widget="many2many_tags" readonly="1"/>
                    </div>
                    <div>
                        <label string="Tarifs (liste active)"/>
                        <t t-set="pricelist_items" t-value="get_pricelist_items_by_quantity()"/>
                        <t t-if="pricelist_items and len(pricelist_items) &gt; 1">
                            <table class="o_table_view table table-sm mt-2">
                                <thead>
                                    <tr>
                                        <th>Quantité minimale</th>
                                        <th>Prix unitaire</th>
                                        <th>Devise</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="pricelist_items" t-as="item">
                                        <tr>
                                            <td><t t-esc="item['min_quantity']"/></td>
                                            <td><t t-esc="'%.2f' % item['price']"/></td>
                                            <td><t t-esc="item['currency'].name"/></td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </t>
                    </div>
                </group>
            </xpath>
        </field>
    </record>
</odoo>
